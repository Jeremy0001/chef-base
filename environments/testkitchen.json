{
  "name": "testkitchen",
  "description": "Multi-tier enviroment for testkitchen to install and configure services in seperated virtual machines.",
  "json_class": "Chef::Environment",
  "chef_type": "environment",
  "override_attributes": {
    "authorization": {
      "sudo": {
      "groups": ["admin"],
      "users": ["vagrant"],
      "passwordless": "true"
      }
    },
    "monit_enabled": true,
    "monit": {
      "binary_install": true,
      "binary": {
        "version": "5.13",
        "url": "http://mmonit.com/monit/dist/binary/5.13/monit-5.13-linux-x64.tar.gz",
        "checksum": "53f882603e8cba01afba176de15115bda09fb66ca81dc949cf8ab76611c4c0e4"
      },
      "main_config_path": "/etc/monitrc",
      "default_monitrc_configs": ["ssh"],
      "alert_ignore_events": ["action", "instance", "pid", "ppid"],
      "alert_email": "alert@example.com",  
	    "mail": {
	    	"hostname": "smtp.example.com",
        "port": "587",
        "security": "TLSV1",
        "from": "monit@example.com",
		    "username": "alert@example.com",
		    "password": "alert_password"
	    }
    },   
    "dbhosts": {
      "db_ip": ["172.31.6.12"],
      "webapp_ip": ["172.31.3.12"]
    },
    "w_haproxy": {
      "listen_port": "80",
      "backend_port": "80"
    },
    "varnish": {
      "listen_port": "80",
      "backend_port": "80",
      "listen_address": "172.31.2.12"
    },
    "w_varnish": {
      "node_ipaddress_list": ["172.31.2.12"],
      "acl_purge": ["\"172.31.3.12\"/32"],
      "geoip":{
        "enabled":true,
        "s3": {
          "enabled": false
        }
      },
      "multi_cookie_enabled": true
    },
    "apache": {
      "listen_ports": ["80"],
      "default_site_port": "80"
    },
    "w_apache": {
      "xdebug_enabled": true,
      "config_test_enabled": true,
      "deploy":{
        "enabled": false
      },
      "phpmyadmin": {
        "enabled": true
      }
    },
    "w_memcached": {
      "ips": ["127.0.0.1"]
    },
    "percona": {
      "cluster": {
        "wsrep_cluster_name":"vagrant_cluster",
        "cluster_ips": ["172.31.6.12"]
      },
      "server": {
        "key_buffer": "512M",
        "query_cache_size": "256M",
        "innodb_buffer_pool_size": "512M",
        "bind_address": "0.0.0.0"
      },
      "skip_passwords": false
    },
    "w_percona": {
      "xinetd_enabled": false
    }
  }
}
